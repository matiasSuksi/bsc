\chapter{Muistinhallintatekniikoiden analysointi ja suorituskyvyn mittaaminen sulautetuissa järjestelmissä} \label{Kuudes luku}

Tässä luvussa pyritään summaamaan edellisen luvun menetelmiä sekä esitellään miten sulautetun järjestelmän muistinkäyttöä, voidaan mitata ja arvioida.

\section{Tekniikoiden analysointi}

Monet viitatut ja lähdekartoituksessa tutkitut artikkelit lähtevät lähtökohdista, jossa pyritään toteuttamaan staattinen menetelmä, sillä ne ovat tunnetusti nopeampia muistinkäytön kannalta kuin dynaamiset menetelmät\cite{daroemmfera@2006}\cite{soeosmm@2009}. Staattisen allokoinnin suurin etu on se, että sillä kyetään vastaamaan reaaliaikaisuuden asettamiin haasteisiin parhaiten ja staattiset menetelmät ovat stabiilimpia kuin dynaamiset\cite{daroemmfera@2006}. Kuitenkin monesti artikkelit joutuivat tyytymään dynaamiseen ratkaisuun tai staattisen ja dynaamisen yhdistelmään, sillä staattisen allokoinnin luonne aiheuttaa liian paljon rajoituksia tehokkaan ratkaisun tuottamiseen\cite{daroemmfera@2006}\cite{soeosmm@2009}. Täten käsitellyt artikkelit ja niin myös tämä tutkielma, keskittyy pääasiassa dynaamisiin menetelmiin sekä niiden kehittämiseen ja optimointiin. Tutkielmaa varten löytyi lähteistöä staattisista muistinhallintatekniikoista sekä hybridimalleista, mutta ne sivuutettiin tutkielmasta niiden vaativuuden sekä kompleksisuuden takia.

Staattiset allokointimenetelmät ennaltaehkäisevät muistin fragmentoitumista\cite{daroemmfera@2006}. Tämä fragmentoitumisen vähentäminen oli artikkeleissa yhtenä vallitsevana teemana, ja tämä tuntuu olevan keskeisenä ongelmana tehokkaan muistinhallinnan kehittämisessä sulautetuissa järjestelmissä. Monissa artikkeleissa, jotka käsittelivät dynaamisia menetelmiä, fragmentoituminen listattiin merkittävänä ongelmana ja käsiteltävää dynaamista menetelmää esiteltiin siinä valossa, että miten menetelmä kykenee vastaamaan fragmentoitumisen ongelmiin.\cite{daroemmfera@2006}\cite{ammsfmes@2016}\cite{b@2020} Lisäksi tutkielmassa löydettiin uusia keinoja mm. miten ohjelmointikielenkääntäjän avulla voidaan tehostaa sovelluksen muistinkäyttöä.

\section{Suorituskyvyn mittaaminen}

Seuraavaksi esitellyt muistinkäytön tehokkuuden mittarit ovat työkaluja erityisesti reaaliaikaisten sulautettujen järjestelmien dynaamisen muistinkäytön mittaamiseen, mutta nämä ovat muutenkin varsin käyttökelpoisia yleisellä tasolla sulautetuissa järjestelmissä (kts. luku 3.1.1).

\begin{itemize}
\item{A. Suurimman-Pienimmän lohkon mittari (engl. \textit{Smallest-Biggest Block Metric (SBBM)}): Kun sovellus saa pyynnön allokoida muistia, suurin huoli on löytää pyynnöllä tarpeeksi suuri yhtäjaksoinen muistilohko. Fragmentoitumisen takia on mahdollista, että tarpeeksi suurta vapaata muistilohkoa ei ole saatavilla, vaikka järjestelmän yhteenlaskettu vapaa muisti olisikin huomattavasti suurempi kuin pyydetyn muistilohkon koko. SBBM-mittari mittaa ohjelman ajon aikana suurimpien vapaiden lohkojen kokoja, ja lopuksi mittauksen jälkeen, se valitsee näistä lohkoista pienimmän lohkon.}\cite{tmtt@2006}

\item{B. Vapaan lohkon mittari - Keskimääräisen koon mittari (engl. \textit{Free Block Metric - Average Size (FBM-AS)}): FBM-AS -mittari ilmaisee ajonaikana vapaiden lohkojen koon keskiarvon.}\cite{tmtt@2006}

\item{C. Sisäinen fragmentoituminen (engl. \textit{Internal Fragmentation (IF)}): IF-mittari mittaa muistin tuhlausta kun muistipyyntöön vastataan suuremmalla lohkolla kuin on välttämätöntä. Muistin tuhlaus on sisäistä suhteessa allokoituun lohkoon. Nythän muistia ei ole pirstoutunut koko ohjelman muistiavaruudessa olevien lohkojen väliin, vaan se on tuhlaantunut itse muistilohkon sisään. Siksi tätä sanotaan sisäiseksi fragmentoitumiseksi.}\cite{tmtt@2006}

\item{D. Kustannuksen mittari (engl. \textit{Cost Metric (CM)}): CM-mittari mittaa järjestelmän tehokkuutta suhteessa saatavilla olevien resurssien määrään. CM-mittari mittaa kuinka paljon muistia järjestelmä vaatii sovelluksen tärkeimpien toiminnallisuuksien suorittamiseen.}\cite{tmtt@2006}

\item{E. Suorituskyvyn mittari (engl. \textit{Performances Metric (PM)}): PM-mittari mittaa muistinhallintajärjestelmän suorituskykyä. Tämä mitataan laskemalla, kuinka monta skannausta järjestelmä tarvitsee muistilohkoihin käsiksi pääsyyn. Eli tarkemmin tämä mittari mittaa kuinka nopeasti sovellus löytää pyyntöä vastaavan tarpeeksi ison muistilohkon järjestelmästä, kuinka nopeasti lohko voidaan vapauttaa ja asettaa takaisin oikealle paikalleen vapaiden lohkojen listaan.}\cite{tmtt@2006}

\end{itemize}

